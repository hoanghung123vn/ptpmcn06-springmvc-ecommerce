<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!-- Mirrored from themenate.com/applicator/dist/data-table.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 07 Jul 2018 12:06:08 GMT -->

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Danh sách người dùng</title>

    <!-- Favicon -->
    <link rel="apple-touch-icon" href="/assets/images/logo/apple-touch-icon.html">
    <link rel="shortcut icon" href="/assets/images/logo/favicon.png">

    <!-- core dependcies css -->
    <link rel="stylesheet" href="/assets/vendor/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="/assets/vendor/PACE/themes/blue/pace-theme-minimal.css" />
    <link rel="stylesheet" href="/assets/vendor/perfect-scrollbar/css/perfect-scrollbar.min.css" />

    <!-- page css -->
    <link rel="stylesheet" href="/assets/vendor/datatables/media/css/dataTables.bootstrap4.min.css" />

    <!-- core css -->
    <link href="/assets/css/font-awesome.min.css" rel="stylesheet">
    <link href="/assets/css/themify-icons.css" rel="stylesheet">
    <link href="/assets/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="/assets/css/animate.min.css" rel="stylesheet">
    <link href="/assets/css/app.css" rel="stylesheet">
</head>

<body>
    <div class="app header-success-gradient">
        <div class="layout">
            <!-- Header START -->
            <div th:insert="admin/fragments :: header"></div>
            <!-- Header END -->

            <!-- Side Nav START -->
            <div th:insert="admin/fragments :: side-nav"></div>
            <!-- Side Nav END -->

            <!-- Page Container START -->
            <div class="page-container">
                <!-- Quick View START -->
                <div th:insert="admin/fragments :: quick-view"></div>
                <!-- Side Panel END -->

                <!-- Content Wrapper START -->
                <div class="main-content">
                    <div class="container-fluid">
                        <div class="page-header">
                            <h2 class="header-title">Danh sách người dùng hệ thống</h2>
                            <div class="header-sub-title">
                                <nav class="breadcrumb breadcrumb-dash">
                                    <a href="#" class="breadcrumb-item"><i class="ti-home p-r-5"></i>Trang chủ</a>
                                    <a class="breadcrumb-item active" href="/admin/customers">Danh sách người dùng</a>
                                </nav>
                            </div>
                        </div>
                        <div class="alert alert-success-gradient" th:if="${success}">
                            <div class="d-flex align-items-center justify-content-start">
                                <span class="alert-icon">
                                    <i class="mdi mdi-check-circle-outline"></i>
                                </span>
                                <span th:text="${success}"></span>
                            </div>
                        </div>
                        <div class="alert alert-danger-gradient" th:if="${error}">
                            <div class="d-flex align-items-center justify-content-start">
                                <span class="alert-icon">
                                    <i class="mdi mdi-close-circle-outline"></i>
                                </span>
                                <span th:text="${error}"></span>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body">
                                <div class="m-t-10 d-flex">
                                    <h4 class="card-title">Lọc theo vai trò người dùng: &nbsp;</h4>
                                    <div class="dropdown">
                                        <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                            <span>Vai trò của người dùng</span>
                                        </button>
                                        <div class="dropdown-menu">
                                            <button id="role_member" class="dropdown-item">Khách hàng</button>
                                            <button id="role_employee" class="dropdown-item">Nhân viên</button>
                                            <button id="role_shipper" class="dropdown-item">Shipper</button>
                                            <button id="role_stocker" class="dropdown-item">Thủ kho</button>
                                            <button id="role_manager" class="dropdown-item">Quản lý</button>
                                            <button id="role_admin" class="dropdown-item">Admin</button>
                                        </div>
                                    </div>
                                    <button id="clear" class="btn btn-primary">Xóa bộ lọc</button>
                                </div>
                                <div class="table-overflow">
                                    <table id="dt-opt" class="table table-hover table-xl">
                                        <thead>
                                            <tr class="text-center">
                                                <th>Tên</th>
                                                <th>Email</th>
                                                <th>Trạng thái</th>
                                                <th>Vai trò</th>
                                                <th>Hành động</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr th:each="customer: ${customers}">
                                                <td>
                                                    <div class="list-media">
                                                        <div class="list-item">
                                                            <div class="media-img">
                                                                <img src="/assets/images/avatars/thumb-1.jpg" alt="">
                                                            </div>
                                                            <div class="info">
                                                                <span class="title"
                                                                    th:text="*{customer.getName()}"></span>
                                                                <span class="sub-title"
                                                                    th:text="'ID: '+*{customer.getId()}"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td th:text="*{customer.getEmail()}"></td>
                                                <td th:switch="*{customer.getStatus()}">
                                                    <span th:case="1"
                                                        class="badge badge-pill badge-gradient-success">Hoạt động</span>
                                                    <span th:case="2" class="badge badge-pill badge-gradient-danger">Đã
                                                        khóa</span>
                                                </td>
                                                <td>
                                                    <div th:each="role: *{customer.getRoles()}"
                                                        th:switch="*{role.getName()}">
                                                        <h6 th:case="ROLE_ADMIN">Admin</h6>
                                                        <h6 th:case="ROLE_MEMBER">Khách hàng</h6>
                                                        <h6 th:case="ROLE_MANAGER">Quản lý</h6>
                                                        <h6 th:case="ROLE_STOCKER">Thủ kho</h6>
                                                        <h6 th:case="ROLE_SHIPPER">Shipper</h6>
                                                        <h6 th:case="ROLE_EMPLOYEE">Nhân viên</h6>
                                                    </div>
                                                </td>
                                                <td class="text-center font-size-18 d-flex">
                                                    <a th:href="'/admin/customer/'+*{customer.getId()}+'/orders'"
                                                        class="btn btn-primary btn-sm">Xem</a>
                                                    <a th:href="@{/admin/employee/edit/{id}(id=${customer.id})}"
                                                        class="btn btn-warning btn-sm"
                                                        th:if="${customer.roles.size() > 1 }">Cập nhật</a>
                                                    <div th:each="role: ${customer.roles}"
                                                        th:unless="${customer.roles.size() > 1 }">
                                                        <a th:href="@{/admin/employee/edit/{id}(id=${customer.id})}"
                                                            class="btn btn-warning btn-sm"
                                                            th:unless="${role.name == 'ROLE_MEMBER'}">Cập nhật</a>
                                                    </div>
                                                    <div
                                                        th:if="${(customer.status == 1) and (customer.roles.?[name == 'ROLE_ADMIN'].isEmpty())}">
                                                        <button data-toggle="modal"
                                                            th:data-target="'#modal-block'+*{customer.getId()}"
                                                            class="btn btn-danger btn-sm">Khóa</button>
                                                        <div class="modal fade"
                                                            th:id="'modal-block'+*{customer.getId()}">
                                                            <div class="modal-dialog modal-sm" role="document">
                                                                <div class="modal-content">
                                                                    <div class="modal-body text-left">
                                                                        <h4 class="m-b-15">Khóa tài khoản?</h4>
                                                                        <p>Bạn có chắc chắn muốn khóa?</p>
                                                                        <div class="m-t-20 text-right">
                                                                            <button class="btn btn-default"
                                                                                data-dismiss="modal">Hủy</button>
                                                                            <a th:href="'/admin/customer/'+*{customer.getId()}+'/toggle-status'"
                                                                                class="btn btn-danger delete">Khóa</a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div
                                                        th:if="${(customer.status == 2) and (customer.roles.?[name == 'ROLE_ADMIN'].isEmpty())}">
                                                        <button data-toggle="modal"
                                                            th:data-target="'#modal-unlock'+*{customer.getId()}"
                                                            class="btn btn-danger btn-sm">Mở khóa</button>
                                                        <div class="modal fade"
                                                            th:id="'modal-unlock'+*{customer.getId()}">
                                                            <div class="modal-dialog modal-sm" role="document">
                                                                <div class="modal-content">
                                                                    <div class="modal-body text-left">
                                                                        <h4 class="m-b-15">Mở tài khoản?</h4>
                                                                        <p>Bạn có chắc chắn muốn mở khóa?</p>
                                                                        <div class="m-t-20 text-right">
                                                                            <button class="btn btn-default"
                                                                                data-dismiss="modal">Hủy</button>
                                                                            <a th:href="'/admin/customer/'+*{customer.getId()}+'/toggle-status'"
                                                                                class="btn btn-danger delete">Mở
                                                                                khóa</a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Content Wrapper END -->

                <!-- Footer START -->
                <footer th:insert="admin/fragments :: footer"></footer>
                <!-- Footer END -->

            </div>
            <!-- Page Container END -->

        </div>
    </div>

    <script src="/assets/js/vendor.js"></script>

    <script src="/assets/js/app.min.js"></script>

    <!-- page js -->
    <script src="/assets/vendor/datatables/media/js/jquery.dataTables.js"></script>
    <script src="/assets/vendor/datatables/media/js/dataTables.bootstrap4.min.js"></script>
    <script src="/assets/js/tables/data-table.js"></script>
    <script src="/assets/js/user_list.js"></script>

</body>


<!-- Mirrored from themenate.com/applicator/dist/data-table.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 07 Jul 2018 12:06:08 GMT -->

</html>
